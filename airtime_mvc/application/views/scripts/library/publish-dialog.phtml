<div class="inner_editor_title">
    <h2>
        <?php echo _("Publishing") ?> "<span ng-bind="media.track_title" class="title_obj_name"></span>"
    </h2>
</div>
<div class="inner_editor_wrapper">
    <form class="media-metadata">
        <input ng-value="media.id" class="obj_id" type="hidden"/>
        <button ng-click="openEditDialog()" class="btn publish-edit-md"><?php echo _("Edit Metadata") ?></button>
        <label class="publish-md-field">
            <?php echo _("Title") ?>
            <input disabled ng-model="media.track_title" type="text"/>
        </label>
        <label class="publish-md-field">
            <?php echo _("Creator") ?>
            <input disabled ng-model="media.artist_name" type="text"/>
        </label>
        <label class="publish-md-field">
            <?php echo _("Description") ?>
            <textarea disabled ng-model="media.description"></textarea>
        </label>
        <fieldset>
            <legend><?php echo _("Publish to:"); ?></legend>
            <div ng-repeat="(source, label) in sources.toPublish">
                <input ng-model="publishData[source]" type="checkbox" name="publish_sources" id="{{source}}">
                <label for="{{source}}">{{label}}</label><br/>
            </div>
            <div ng-if="sources.toPublish.length == 0">
                <?php echo _("You have already published this track to all available sources!") . "<br/>"
                         . _("Published tracks can be removed or updated below.") ?>
            </div>
        </fieldset>
        <fieldset>
            <legend><?php echo _("Published on:"); ?></legend>
            <div class="published-sources" ng-repeat="(source, label) in sources.published">
                <span class="sp-checked-icon checked-icon left-floated"></span>
                <span class="source-name">{{label}}</span>
                <button class="btn btn-small" ng-click="remove(source)"><?php echo _("Remove") ?></button>
            </div>
            <div ng-if="sources.published.length == 0">
                <?php echo _("You haven't published this track to any sources!") . "<br/>"
                         . _("Check the boxes above and hit 'Publish' to publish this track to the marked sources.") ?>
            </div>
        </fieldset>
    </form>
</div>

<div class="btn-toolbar clearfix">
    <div class="btn-group pull-right">
        <button ng-click="discard()" class="btn" type="button" name="cancel">
            <?php echo _("Cancel") ?>
        </button>
    </div>
    <div class='btn-group pull-right'>
        <button ng-click="publish()" class="btn" title='<?php echo _("Publish") ?>' type="button">
            <?php echo _("Publish") ?>
        </button>
    </div>
    <div class='success' style='display:none'></span></div>
</div>

